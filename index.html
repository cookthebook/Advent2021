<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
  </head>

  <body class="container p-centered" style="width: 30rem;">
    <header class="navbar" style="padding-top: 5px;">
      <section class="navbar-section">
        <a href="https://adventofcode.com/">Advent of Code</a>
      </section>
  
      <section class="navbar-center">
        <img class="avatar avatar-xl" src="media/fall_pfp.png" />
      </section>
  
      <section class="navbar-section">
        <a href="https://github.com/cookthebook/Advent2021">GitHub</a>
      </section>
    </header>

    <h2 class="text-center">Cook's Advent of Code 2021 Solutions</h2>
    <p>
      The following is a web frontend to run my Javascript solutions to the 2021 Advent of code challenges.
      You can provide input by selecting your input text file or by pasting into the text area.
      You can view the code at the GitHub repository linked above or with the specific days source link.
    </p>

    <p>Be sure to try the challenges yourself!</p>

    <p>Note: Most of my solutions assume that your input file does not have an empty line at the end!</p>

    <form class="form-horizontal">
      <div class="divider"></div>

      <div class="form-group">
        <div class="col-3 col-sm-12">
          <label>Input File</label>
        </div>
        <div class="col-9 col-sm-12">
          <input type="file" id="file_input" />
        </div>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <div class="col-3 col-sm-12">
          <label>Input Value</label>
        </div>
        <div class="col-9 col-sm-12">
          <textarea id="text_input"></textarea>
        </div>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <div class="col-3 col-sm-12">
          <label>Day</label>
        </div>
        <div class="col-9 col-sm-12">
          <select id="day_select" class="form-inline">
            <option value="day01">1</option>
            <option value="day02">2</option>
            <option value="day03">3</option>
            <option value="day04">4</option>
            <option value="day05">5</option>
            <option value="day06">6</option>
            <option value="day07">7</option>
            <option value="day08">8</option>
            <option value="day09">9</option>
            <option value="day10">10</option>
            <option value="day11">11</option>
          </select>
          <a class="form-inline" id="source_link">View source</a>
        </div>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <div class="col-3 col-sm-12">
          <label class="form-label">Star 2?</label>
        </div>
        <div class="col-9 col-sm-12">
          <input type="checkbox" id="star_select" />
        </div>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <div class="col-3 col-sm-12">
          <button type="button" id="solve_btn">Solve</button>
        </div>
        <div class="col-9 col-sm-12">
          <b id="result" style="font-family: monospace; display: none;"></b>
        </div>
      </div>

      <div class="divider"></div>
    </form>
  </body>

  <script src="js/day01.js"></script>
  <script src="js/day02.js"></script>
  <script src="js/day03.js"></script>
  <script src="js/day04.js"></script>
  <script src="js/day05.js"></script>
  <script src="js/day06.js"></script>
  <script src="js/day07.js"></script>
  <script src="js/day08.js"></script>
  <script src="js/day09.js"></script>
  <script src="js/day10.js"></script>
  <script src="js/day11.js"></script>
  <script>
    var solve_btn = document.getElementById("solve_btn");
    var day_select = document.getElementById('day_select');
    var source_link = document.getElementById('source_link');
    var result = document.getElementById('result');

    var file_input = document.getElementById('file_input');
    var text_input = document.getElementById('text_input');
    var solution = '';
    var copy_btn = document.getElementById('copy_btn');

    file_input.addEventListener('change', () => {
      var file = file_input.files[0];

      if (file) {
        file.text().then(text => {
          text_input.value = text;
        });
      }
    });

    source_link.href = `https://github.com/cookthebook/Advent2021/blob/master/js/${day_select.value}.js`;
    day_select.addEventListener('change', () => {
      source_link.href = `https://github.com/cookthebook/Advent2021/blob/master/js/${day_select.value}.js`;
    });

    solve_btn.addEventListener('click', () => {
      var star2 = document.getElementById('star_select').checked;
      var day = day_select.value;
      var solver = eval(`new ${day}(text_input.value, star2)`);

      solution = solver.solve();
      result.innerText = solution;
      result.style.display = 'inline'
    });
  </script>
</html>